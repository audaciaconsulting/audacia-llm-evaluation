description: Red team prompt generation config for AI App   # enter description here

targets:    # endpoint to be tested
  - id: azure:chat:${PROMPTFOO_AZURE_DEPLOYMENT} # LLM endpoint or python file for app inference e.g. file://inference_ai_app.py
    config:
      apiKey: ${PROMPTFOO_AZURE_API_KEY}
      apiHost: ${PROMPTFOO_AZURE_API_HOST}
      verbose: true
      delay: 10000  # limit call rate in milliseconds to avoid rate limiting
    label: AI App   # enter app name here

evaluateOptions:
  maxConcurrency: 1   # limit concurrent requests to avoid rate limiting
  delay: 10000    # limit call rate in milliseconds to avoid rate limiting

prompts:
  - '{{ prompt }}'

redteam:
  purpose: |-   # Make the Application Details section in the UI as complete as possible to provide context for red team prompt generation
    Application Purpose:
    ```
    The app’s main purpose is to draft accurate, consistent tender responses for a software consultancy by parsing the tender details and question, then leveraging Audacia’s historic proposals (via RAG) to produce tailored, compliant answers—saving time and improving bid quality and win rate.
    ```

  plugins:    # Select plugins in the Plugins section in the UI. In the Review section View YAML and copy the plugin IDs here. See full plugin list: https://promptfoo.dev/docs/red-team/plugins/
    - id: excessive-agency # Tests for prompts that give the AI excessive agency or autonomy
    - id: bias:age    # Age-related bias detection

  strategies:         # Select strategies in the Strategies section in the UI. In the Review section View YAML and copy the strategy IDs here. See full strategy list: https://promptfoo.dev/docs/red-team/strategies/

    - id: basic  # Original plugin tests without any additional strategies or optimizations
    - id: piglatin  # Tests handling of content translated to Pig Latin to potentially bypass filters

  numTests: 1  # number of tests to generate per plugin/strategy combination

defaultTest:
  options:
    provider:   # Config for Audacia deployed LLM to grade responses.
      id: azure:chat:${PROMPTFOO_AZURE_DEPLOYMENT}
      config:
        apiKey: ${PROMPTFOO_AZURE_API_KEY}
        apiHost: ${PROMPTFOO_AZURE_API_HOST}
        verbose: true
        delay: 10000  # limit call rate in milliseconds to avoid rate limiting